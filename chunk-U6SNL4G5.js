import{A as B,B as G,b as _,c as g,e as F,f as y,h as S,i as P,j as T,k as I,m as M,p as k,q as A,y as q,z as N}from"./chunk-ZLLHL3HH.js";import{a as z,b as R}from"./chunk-UJO5BMKH.js";import{n as O,o as E,p as D,q as V,r as L,s as j}from"./chunk-2VMBMNCH.js";import{b as h,e as x,h as b,q as w}from"./chunk-4VKDULOE.js";import"./chunk-36JN3LZY.js";import{$a as s,Aa as u,Ga as C,La as p,Za as o,_a as a,ab as l,jb as f,kb as d,tb as c,ua as r,wb as m}from"./chunk-DLFWAVIA.js";function W(n,t){if(n&1&&l(0,"p-message",21),n&2){let e=d();o("text",e.getFieldError("earTag"))}}function H(n,t){if(n&1&&l(0,"p-message",21),n&2){let e=d();o("text",e.getFieldError("sex"))}}function $(n,t){if(n&1&&l(0,"p-message",21),n&2){let e=d();o("text",e.getFieldError("pen"))}}function J(n,t){if(n&1&&l(0,"p-message",21),n&2){let e=d();o("text",e.getFieldError("status"))}}function K(n,t){if(n&1&&l(0,"p-message",21),n&2){let e=d();o("text",e.getFieldError("weight"))}}var U=class n{constructor(t,e,i,v){this.fb=t;this.cowService=e;this.router=i;this.location=v}cowForm;sexOptions=[{label:"Male",value:"Male"},{label:"Female",value:"Female"}];statusOptions=[{label:"Active",value:"Active"},{label:"In Treatment",value:"InTreatment"},{label:"Deceased",value:"Deceased"}];penOptions=[];ngOnInit(){this.initializeForm(),this.loadPenOptions()}initializeForm(){this.cowForm=this.fb.group({earTag:["",[g.required,this.uniqueEarTagValidator.bind(this)]],sex:["",g.required],pen:["",g.required],status:["Active",g.required],weight:[null,[g.min(.1)]]})}loadPenOptions(){let e=["Pen 1","Pen 2","Pen 3","Pen 4","Pen 5"].sort();this.penOptions=e.map(i=>({label:i,value:i}))}uniqueEarTagValidator(t){return t.value?this.cowService.isEarTagUnique(t.value)?null:{uniqueEarTag:!0}:null}onSubmit(){if(this.cowForm.valid){let t=this.cowForm.value;this.cowService.addCow({earTag:t.earTag,sex:t.sex,pen:t.pen,status:t.status,weight:t.weight||void 0}),this.router.navigate(["/"])}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.cowForm.controls).forEach(t=>{this.cowForm.get(t)?.markAsTouched()})}goBack(){this.location.back()}isFieldInvalid(t){let e=this.cowForm.get(t);return!!(e&&e.invalid&&e.touched)}getFieldError(t){let e=this.cowForm.get(t);if(e&&e.errors&&e.touched){if(e.errors.required)return`${this.getFieldLabel(t)} is required`;if(e.errors.uniqueEarTag)return"This ear tag already exists";if(e.errors.min)return"Weight must be greater than 0"}return""}getFieldLabel(t){return{earTag:"Ear Tag",sex:"Sex",pen:"Pen",status:"Status",weight:"Weight"}[t]||t}static \u0275fac=function(e){return new(e||n)(u(I),u(j),u(w),u(h))};static \u0275cmp=C({type:n,selectors:[["app-add-cow"]],decls:42,vars:22,consts:[[1,"add-cow-container"],[1,"header-actions"],["label","Back","icon","pi pi-arrow-left","severity","secondary","size","small","type","button",3,"onClick"],["header","Add New Cow"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],["for","earTag"],[1,"required"],["id","earTag","type","text","pInputText","","formControlName","earTag","placeholder","Enter ear tag (e.g., C001)"],["severity","error",3,"text",4,"ngIf"],["for","sex"],["id","sex","formControlName","sex","optionLabel","label","optionValue","value","placeholder","Select sex",3,"options"],["for","pen"],["id","pen","formControlName","pen","optionLabel","label","optionValue","value","placeholder","Select pen",3,"options"],["for","status"],["id","status","formControlName","status","optionLabel","label","optionValue","value","placeholder","Select status",3,"options"],["for","weight"],["id","weight","formControlName","weight","mode","decimal","placeholder","Enter weight","suffix"," kg",3,"minFractionDigits","maxFractionDigits"],[1,"form-actions"],["label","Save Cow","icon","pi pi-check","type","submit",3,"disabled"],["severity","error",3,"text"]],template:function(e,i){e&1&&(l(0,"app-header"),a(1,"div",0)(2,"div",1)(3,"p-button",2),f("onClick",function(){return i.goBack()}),s()(),a(4,"p-card",3)(5,"form",4),f("ngSubmit",function(){return i.onSubmit()}),a(6,"div",5)(7,"div",6)(8,"label",7),m(9," Ear Tag "),a(10,"span",8),m(11,"*"),s()(),l(12,"input",9),p(13,W,1,1,"p-message",10),s(),a(14,"div",6)(15,"label",11),m(16," Sex "),a(17,"span",8),m(18,"*"),s()(),l(19,"p-select",12),p(20,H,1,1,"p-message",10),s(),a(21,"div",6)(22,"label",13),m(23," Pen "),a(24,"span",8),m(25,"*"),s()(),l(26,"p-select",14),p(27,$,1,1,"p-message",10),s(),a(28,"div",6)(29,"label",15),m(30," Status "),a(31,"span",8),m(32,"*"),s()(),l(33,"p-select",16),p(34,J,1,1,"p-message",10),s(),a(35,"div",6)(36,"label",17),m(37,"Weight (kg)"),s(),l(38,"p-inputnumber",18),p(39,K,1,1,"p-message",10),s()(),a(40,"div",19),l(41,"p-button",20),s()()()()),e&2&&(r(5),o("formGroup",i.cowForm),r(7),c("ng-invalid",i.isFieldInvalid("earTag")),r(),o("ngIf",i.isFieldInvalid("earTag")),r(6),c("ng-invalid",i.isFieldInvalid("sex")),o("options",i.sexOptions),r(),o("ngIf",i.isFieldInvalid("sex")),r(6),c("ng-invalid",i.isFieldInvalid("pen")),o("options",i.penOptions),r(),o("ngIf",i.isFieldInvalid("pen")),r(6),c("ng-invalid",i.isFieldInvalid("status")),o("options",i.statusOptions),r(),o("ngIf",i.isFieldInvalid("status")),r(4),c("ng-invalid",i.isFieldInvalid("weight")),o("minFractionDigits",0)("maxFractionDigits",2),r(),o("ngIf",i.isFieldInvalid("weight")),r(2),o("disabled",i.cowForm.invalid))},dependencies:[b,x,M,S,_,F,y,P,T,E,O,A,k,N,q,G,B,V,D,R,z,L],styles:[".add-cow-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:1rem}.header-actions[_ngcontent-%COMP%]{margin-bottom:1rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;min-height:5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;font-size:.9rem;flex-shrink:0}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   p-select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   p-inputnumber[_ngcontent-%COMP%]{flex-shrink:0}.form-group[_ngcontent-%COMP%]   p-message[_ngcontent-%COMP%]{min-height:1.5rem;flex-grow:1;display:flex;align-items:flex-start}.required[_ngcontent-%COMP%]{color:#dc3545}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem}  p-message .p-message{outline-style:none;background:none}  p-message .p-message-content{padding:2px 0 0 4px}  p-message .p-message-text{font-size:.9rem}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}}"],changeDetection:0})};export{U as AddCowComponent};
